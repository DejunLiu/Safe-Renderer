/******************************************************************************
**
**   File:        PglTest.cpp
**   Description:
**
**   Copyright (C) 2017 Luxoft GmbH
**
**   This file is part of Safe Renderer.
**
**   Safe Renderer is free software: you can redistribute it and/or
**   modify it under the terms of the GNU Lesser General Public
**   License as published by the Free Software Foundation.
**
**   Safe Renderer is distributed in the hope that it will be useful,
**   but WITHOUT ANY WARRANTY; without even the implied warranty of
**   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
**   Lesser General Public License for more details.
**
**   You should have received a copy of the GNU Lesser General Public
**   License along with Safe Renderer.  If not, see
**   <http://www.gnu.org/licenses/>.
**
**   SPDX-License-Identifier: LGPL-3.0
**
******************************************************************************/

#include <gtest/gtest.h>

#ifdef WIN32
#include <Windows.h>
#endif

#include "pgl.h"

const unsigned char image2x2[] =
{
//    R     G     B     A
    0x00, 0x00, 0xff, 0xff, //cyan
    0xff, 0x00, 0xff, 0xff, //magenta
    0xff, 0xff, 0x00, 0xff, //yellow
    0xff, 0x00, 0x00, 0xff  //red
};

static const unsigned char image_data_0026indicator_oil[] =
{
    0x00, 0xff, 0xff, 0xff, 0x10, 0xff, 0xaa, 0x00, 0x80, 0xff, 0xaa, 0x00, 0xd0, 0xff, 0xaa, 0x00, 0x90, 0xff, 0xaa, 0x00, 0x30, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xd0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0x20, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff,
    0x00, 0xff, 0xff, 0xff, 0x60, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xd0, 0xff, 0xaa, 0x00, 0x70, 0xff, 0xaa, 0x00, 0x20, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x40, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x80, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff,
    0x00, 0xff, 0xff, 0xff, 0xe0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x90, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0xc0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0x20, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x30, 0xff, 0xaa, 0x00, 0x70, 0xff, 0xaa, 0x00, 0xb0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0x30, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff,
    0x40, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xd0, 0xff, 0xaa, 0x00, 0x30, 0xff, 0xaa, 0x00, 0x90, 0xff, 0xaa, 0x00, 0xe0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x20, 0xff, 0xaa, 0x00, 0x60, 0xff, 0xaa, 0x00, 0xa0, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0x30, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff,
    0xa0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xe0, 0xff, 0xaa, 0x00, 0x80, 0xff, 0xaa, 0x00, 0x30, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x40, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xd0, 0xff, 0xaa, 0x00, 0x10, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x10, 0xff, 0xaa, 0x00, 0x50, 0xff, 0xaa, 0x00, 0x90, 0xff, 0xaa, 0x00, 0xd0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0xc0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff,
    0x90, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xe0, 0xff, 0xaa, 0x00, 0x90, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xd0, 0xff, 0xaa, 0x00, 0x80, 0xff, 0xaa, 0x00, 0xc0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xd0, 0xff, 0xaa, 0x00, 0x30, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x60, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xe0, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff,
    0x00, 0xff, 0xff, 0xff, 0x50, 0xff, 0xaa, 0x00, 0xa0, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xa0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xe0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xd0, 0xff, 0xaa, 0x00, 0x10, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x20, 0xff, 0xaa, 0x00, 0x20, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff,
    0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x30, 0xff, 0xaa, 0x00, 0x90, 0xff, 0xaa, 0x00, 0xe0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xa0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0xb0, 0xff, 0xaa, 0x00, 0x60, 0xff, 0xaa, 0x00, 0x20, 0xff, 0xaa, 0x00, 0x70, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0x10, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xa0, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff,
    0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x30, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x40, 0xff, 0xaa, 0x00, 0x30, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x60, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0x30, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xf0, 0xff, 0xaa, 0x00, 0x30, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff,
    0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x30, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x70, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xa0, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff,
    0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x20, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x60, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x10, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x30, 0xff, 0xaa, 0x00,
    0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x10, 0xff, 0xaa, 0x00, 0xd0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0x80, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x80, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xb0, 0xff, 0xaa, 0x00,
    0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xa0, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xc0, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xc0, 0xff, 0xaa, 0x00,
    0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xc0, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x90, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xff, 0xff, 0xaa, 0x00, 0xb0, 0xff, 0xaa, 0x00,
    0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x30, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x40, 0xff, 0xaa, 0x00, 0x20, 0xff, 0xaa, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0x10, 0xff, 0xaa, 0x00, 0xb0, 0xff, 0xaa, 0x00, 0xf0, 0xff, 0xaa, 0x00, 0xb0, 0xff, 0xaa, 0x00, 0x10, 0xff, 0xaa, 0x00
};

TEST(pgl, drawBitmap)
{
    pglInit();
    PGLSurface window = pglCreateWindow(0, 0, 0, 800, 480);
    EXPECT_TRUE(window != NULL);
    PGLContext context = pglCreateContext();
    EXPECT_TRUE(context != NULL);
    EXPECT_EQ(PGL_TRUE, pglSetSurface(context, window));
    EXPECT_EQ(PGL_TRUE, pglSetColor(context, 0xff, 0x00, 0xff, 0xff));
    pglDrawArea(context, 10<<4, 20<<4, 400<<4, 240<<4);
    PGLTexture texture = pglCreateTexture(context);
    pglBindTexture(context, texture);
    EXPECT_EQ(PGL_TRUE, pglLoadTexture(texture, 41, 15, PGL_FORMAT_BGRA_8888, PGL_FALSE, image_data_0026indicator_oil));
    int x1 = 20;
    int x2 = x1 + 41 -1;
    int y1 = 30;
    int y2 = y1 + 15 - 1;
    pglDrawQuad(context, x1<<4, y1<<4, 0, 0, x2 << 4, y2 << 4, 40 << 4, 14 << 4);
    pglDrawQuad(context, (x1*3) << 4, (y1*3) << 4, 0, 0, x2 << 4, y2 << 4, 40 << 4, 14 << 4);
    EXPECT_EQ(PGL_TRUE, pglSwapBuffers(window));
    EXPECT_EQ(PGL_NO_ERROR, pglGetError(context));
    pglHandleWindowEvents(context);
    // verify previous render commands
    EXPECT_EQ(PGL_TRUE, pglVerify(context, x1 << 4, y1 << 4, 0, 0, x2 << 4, y2 << 4, 40 << 4, 14 << 4));
    EXPECT_EQ(PGL_TRUE, pglVerify(context, (x1*3) << 4, (y1*3) << 4, 0, 0, x2 << 4, y2 << 4, 40 << 4, 14 << 4));
    // verify at wrong position
    EXPECT_EQ(PGL_FALSE, pglVerify(context, 0, 0, 0, 0, 40 << 4, 14 << 4, 40 << 4, 14 << 4));
    // TODO: image verification
}
